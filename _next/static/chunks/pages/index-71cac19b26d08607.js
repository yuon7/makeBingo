(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1155)}])},1155:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(5893),o=a(3707),i=a(3441),l=a(4362),r=a(1120),s=a.n(r),c=a(7294),d=a(8150);let u={control:e=>({...e,backgroundColor:"white",borderColor:"#ccc",boxShadow:"none",":hover":{borderColor:"lightgray"},borderRadius:20,padding:4}),option:(e,t)=>{let{isFocused:a,isSelected:n}=t;return{...e,backgroundColor:n?"lightgray":a?"white":void 0,":active":{backgroundColor:n?"lightgray":void 0},borderRadius:10}},menu:e=>({...e,borderRadius:10,boxShadow:"0 4px 10px rgba(0,0,0,0.1)",width:"300%",menuHeight:"200%"}),menuList:e=>({...e,padding:0}),singleValue:e=>({...e,color:"black",maxHeight:"180px"}),placeholder:e=>({...e,color:"lightgray"})};var _=a(2729),h=a.n(_),g=()=>{let[e,t]=(0,c.useState)([[-1,-1,-1],[-1,-1,-1],[-1,-1,-1]]),[a,r]=(0,c.useState)([]),[_,g]=(0,c.useState)("all"),[m,b]=(0,c.useState)(!1),[f,p]=(0,c.useState)([[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]]),x={all:"All",vocaloid:"VIRTUAL SINGER",light_music_club:"Leo/need",idol:"MORE MORE JUMP!",street:"Vivid BAD SQUAD",theme_park:"ワンダーランズ\xd7ショウタイム",school_refusal:"25時、ナイトコードで。"},w=["all","vocaloid","light_music_club","idol","street","theme_park","school_refusal"].map(e=>({value:e,label:x[e]})),k=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=async()=>{let e=await fetch("https://sekai-world.github.io/sekai-master-db-diff/musics.json"),t=await e.json(),a=await fetch("https://sekai-world.github.io/sekai-master-db-diff/musicTags.json"),n=await a.json(),o=t.map(e=>({...e,unitNames:n.filter(t=>t.musicId===e.id).map(e=>e.musicTag)}));r(o)};e()},[]);let N=()=>a.filter(e=>"all"===_||e.unitNames.includes(_)).map(e=>e.id),j=()=>{p([[!0,!0,!0],[!0,!0,!0],[!0,!0,!0]])},v=async()=>{b(!0),j();let a=N();if(a.length>0){let n=e.map(e=>e.map(()=>a[Math.floor(Math.random()*a.length)]));t(n),n.forEach((e,t)=>{e.forEach((e,a)=>{setTimeout(()=>{p(e=>{let n=[...e];return n[t]=[...n[t]],n[t][a]=!1,n})},(t*n.length+a)*500)})})}b(!1)},S=e=>{let t=e.toString().padStart(3,"0");return"https://storage.sekai.best/sekai-assets/music/jacket/jacket_s_".concat(t,"_rip/jacket_s_").concat(t,".webp")},C=(e,a,n)=>{p(t=>{let n=[...t];return n[e]=[...n[e]],n[e][a]=!0,n});let o=n[Math.floor(Math.random()*n.length)];t(t=>{let n=[...t];return n[e]=[...n[e]],n[e][a]=o,n}),setTimeout(()=>{p(t=>{let n=[...t];return n[e]=[...n[e]],n[e][a]=!1,n})},500)};return(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsx)(d.ZP,{styles:u,options:w,value:w.find(e=>e.value===_)||null,onChange:e=>{null!==e&&g(e.value)},isMulti:!1}),(0,n.jsx)("div",{className:h().board,ref:k,children:e.map((e,t)=>(0,n.jsx)("div",{className:h().row,children:e.map((e,a)=>(0,n.jsx)("div",{className:"".concat(h().cell," ").concat(f[t][a]?h().loading:""),children:-1===e?(0,n.jsx)(l.Z,{fontSize:"large"}):!f[t][a]&&(0,n.jsx)("img",{src:S(e),alt:"".concat(e),onError:()=>C(t,a,N())})},a))},t))}),(0,n.jsxs)("div",{className:h().buttonContainer,children:[(0,n.jsx)("button",{className:h().buttonNeon,onClick:v,disabled:m,children:(0,n.jsx)(o.Z,{fontSize:"large"})}),(0,n.jsx)("button",{className:h().buttonNeon,onClick:()=>{setTimeout(()=>{k.current&&s()(k.current,{useCORS:!0}).then(e=>{let t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="bingo.png",t.click()})},500)},disabled:m,children:(0,n.jsx)(i.Z,{fontSize:"large"})})]})]})}},2729:function(e){e.exports={container:"index_container___q52_",board:"index_board__dNO5V",cell:"index_cell__E8qMc",loading:"index_loading__SZPjG","spin-3d":"index_spin-3d__TgS9I",buttonContainer:"index_buttonContainer__U23SP",buttonNeon:"index_buttonNeon__SJWvf",row:"index_row__UqwCN"}}},function(e){e.O(0,[443,677,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);